# Sofia Bot ‚Äî –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π

> –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã, —Ä–µ—à–µ–Ω–∏—è –∏ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º

---

## üîë –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ü–æ—á–µ–º—É GPT-5-mini –¥–ª—è –±–æ—Ç–∞?
- –î—ë—à–µ–≤–æ ($0.25/$2 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤)
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–º–Ω—ã–π –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
- –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫

### –ü–æ—á–µ–º—É GPT-5.1 –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞?
- –£–º–Ω–µ–µ, –ª—É—á—à–µ –≤–∏–¥–∏—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ä–∞–∑ –≤ –¥–µ–Ω—å ‚Äî —Å—Ç–æ–∏–º–æ—Å—Ç—å ~$0.09
- –ù–µ –ø—É—Ç–∞—Ç—å: –¥–ª—è gpt-5.1 –ù–ï –Ω—É–∂–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `reasoning` (—ç—Ç–æ –¥–ª—è o-—Å–µ—Ä–∏–∏)

### –°–∏—Å—Ç–µ–º–∞ —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏—è
```
–≠–∫—Å–ø–µ—Ä—Ç—ã —Å—Ç–∞–≤—è—Ç –æ—Ü–µ–Ω–∫–∏ ‚Üí 22:00 GPT-5.1 –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç ‚Üí 
‚Üí –ù–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç ‚Üí –ë—ç–∫–∞–ø ‚Üí –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ ‚Üí –†–µ—Å—Ç–∞—Ä—Ç ‚Üí Telegram-–æ—Ç—á—ë—Ç
```

---

## üõ† –ß–∞—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
ssh -p 2222 root@72.56.64.91
cd /opt/sofia-bot

# –°—Ç–∞—Ç—É—Å
systemctl status sofia-bot
python3 prompt_health.py

# –õ–æ–≥–∏
journalctl -u sofia-bot -f

# –†—É—á–Ω–æ–π –∞–Ω–∞–ª–∏–∑
export $(cat .env | xargs) && python3 sofia_analyzer.py

# –£—Ç—Ä–µ–Ω–Ω–∏–π –ø–∏–Ω–≥ —Ç–µ—Å—Ç–µ—Ä–∞–º
export $(cat .env | xargs) && python3 morning_ping.py

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã
python3 << 'PYEOF'
import sqlite3
conn = sqlite3.connect('sofia_conversations.db')
c = conn.cursor()
c.execute("SELECT rating, COUNT(*) FROM feedback_v2 GROUP BY rating")
print(dict(c.fetchall()))
conn.close()
PYEOF

# –û—Ç–∫–∞—Ç –ø—Ä–æ–º–ø—Ç–∞
ls backups/
cp backups/sofia_prompt_XXXXXXXX.py sofia_prompt.py
systemctl restart sofia-bot

# Git
git add -A && git commit -m "–æ–ø–∏—Å–∞–Ω–∏–µ" && git push
```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### API –∑–∞–≤–∏—Å–∞–µ—Ç
**–°–∏–º–ø—Ç–æ–º:** –ó–∞–ø—Ä–æ—Å –∫ GPT-5.1 –≤–∏—Å–∏—Ç –±–æ–ª—å—à–µ 2 –º–∏–Ω—É—Ç
**–ü—Ä–∏—á–∏–Ω–∞:** –õ–∏—à–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä `reasoning` (–¥–ª—è o-—Å–µ—Ä–∏–∏, –Ω–µ –¥–ª—è gpt-5)
**–†–µ—à–µ–Ω–∏–µ:** `sed -i 's/reasoning={"effort": "high"},//' sofia_analyzer.py`

### Telegram –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç
**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** `echo $TELEGRAM_BOT_TOKEN` ‚Äî –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–∫–µ–Ω
**–†–µ—à–µ–Ω–∏–µ:** `export $(cat .env | xargs)`

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ø–æ—Ä–æ–≥–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | üü¢ –ù–æ—Ä–º–∞ | üü° –í–Ω–∏–º–∞–Ω–∏–µ | üî¥ –ü—Ä–æ–±–ª–µ–º–∞ |
|---------|----------|-------------|-------------|
| –¢–æ–∫–µ–Ω—ã –ø—Ä–æ–º–ø—Ç–∞ | < 8k | 8-15k | > 15k (RAG) |
| GOOD rate | > 80% | 65-80% | < 65% |
| –û—Ü–µ–Ω–æ–∫ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ | > 50 | 30-50 | < 30 |
| GOOD –¥–ª—è fine-tuning | 500 | 100-500 | < 100 |

---

## üë• –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∏

- **–û–∫—Å–∞–Ω–∞** ‚Äî –¥–∞—ë—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –≥–ª–∞–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —É–ª—É—á—à–µ–Ω–∏–π
- **–ì—É–ª—å–Ω–∞—Ä–∞** ‚Äî —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç
- **–õ–µ—Å—è** ‚Äî —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
/opt/sofia-bot/
‚îú‚îÄ‚îÄ bot_server.py          # –ì–ª–∞–≤–Ω—ã–π –±–æ—Ç
‚îú‚îÄ‚îÄ sofia_prompt.py        # –ü—Ä–æ–º–ø—Ç (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ sofia_analyzer.py      # –ù–æ—á–Ω–æ–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä (22:00)
‚îú‚îÄ‚îÄ prompt_health.py       # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è
‚îú‚îÄ‚îÄ morning_ping.py        # –£—Ç—Ä–µ–Ω–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
‚îú‚îÄ‚îÄ sofia_conversations.db # –ë–∞–∑–∞ –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –æ—Ü–µ–Ω–æ–∫
‚îú‚îÄ‚îÄ .env                   # –°–µ–∫—Ä–µ—Ç—ã (–Ω–µ –≤ git!)
‚îú‚îÄ‚îÄ backups/               # –ë—ç–∫–∞–ø—ã –ø—Ä–æ–º–ø—Ç–æ–≤ (7 –¥–Ω–µ–π)
‚îú‚îÄ‚îÄ analyzer_logs/         # –õ–æ–≥–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ CLAUDE.md              # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ PROJECT_HISTORY.md     # –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ RESTORE.md             # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ SOFIA_KNOWLEDGE.md     # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üîÑ Cron –∑–∞–¥–∞—á–∏
```
0 22 * * * ‚Äî sofia_analyzer.py (–∞–Ω–∞–ª–∏–∑ + —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞)
```

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 12.12.2025*
